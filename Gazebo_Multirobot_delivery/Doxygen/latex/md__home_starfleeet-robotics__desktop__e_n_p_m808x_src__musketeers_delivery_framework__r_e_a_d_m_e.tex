\href{https://opensource.org/licenses/Apache-2.0}{\texttt{ }}

\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md1}{}\doxysection{Overview}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md1}
The rapid rise of e-\/commerce services in the last decade, and its forecast for the future, have proved that the need for delivery services will be increasing, which needs to be addressed by improving the delivery infrastructure. Developments in technology have now made it possible to provide an autonomous solution, which can revolutionize the industry by creating an autonomous delivery network that can accomplish this task without the need for human intervention. \textbackslash{} In this project, we propose a fleet of autonomous delivery robots, called Musky, that can provide transportation services for various kinds of small to medium-\/sized goods($<$10 lbs) for short-\/range hauling($<$5 Miles) using Multi Fleet G\+PS Waypoint Navigation.\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md2}{}\doxysubsection{Repository}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md2}
This repository contains a multi-\/robot autonomous delivery framework, that works with husky robots from Clear\+Path robotics, in a simulation environment. The robots called \char`\"{}\+Musky\char`\"{} can be controlled via command line inputs, where they can be made to traverse to a preset location to pick up an order from a restaurant and will deliver it to a preset delivery location.\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md3}{}\doxysubsection{U\+ML}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md3}
\mbox{[}Quad Chart\mbox{]}(\href{https://drive.google.com/file/d/112d7ZOfGakJW6sQtDZE99uixeMIY7aPG/view?usp=sharing}{\texttt{ https\+://drive.\+google.\+com/file/d/112d7\+Z\+Of\+Gak\+J\+W6s\+Qt\+D\+Z\+E99uixe\+M\+I\+Y7a\+P\+G/view?usp=sharing}}) \textbackslash{} \mbox{[}Project Proposal\mbox{]}(\href{https://drive.google.com/file/d/1M1FodIeb_yLv4JwdbofX3ztwyTm6bGPM/view?usp=sharing}{\texttt{ https\+://drive.\+google.\+com/file/d/1\+M1\+Fod\+Ieb\+\_\+y\+Lv4\+Jwdbof\+X3ztwy\+Tm6b\+G\+P\+M/view?usp=sharing}}) \textbackslash{} \mbox{[}Activity Diagram\mbox{]}(\href{https://drive.google.com/file/d/1Tu6yAAuHe9edw5sUqZ6b6rdyhWe9690b/view?usp=sharing}{\texttt{ https\+://drive.\+google.\+com/file/d/1\+Tu6y\+A\+Au\+He9edw5s\+Uq\+Z6b6rdyh\+We9690b/view?usp=sharing}}) \textbackslash{} \mbox{[}Class Diagram\mbox{]}(\href{https://drive.google.com/file/d/1F0wCk2moPsRFCpEKdf5eaZrsnagD0Mt8/view?usp=sharing}{\texttt{ https\+://drive.\+google.\+com/file/d/1\+F0w\+Ck2mo\+Ps\+R\+F\+Cp\+E\+Kdf5ea\+Zrsnag\+D0\+Mt8/view?usp=sharing}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md4}{}\doxysubsection{A\+I\+P Document}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md4}
\mbox{[}!\mbox{[}Doc Link\mbox{]}(\href{https://img.shields.io/badge/Doc-link-blue}{\texttt{ https\+://img.\+shields.\+io/badge/\+Doc-\/link-\/blue}})\mbox{]}(\href{https://docs.google.com/spreadsheets/d/1ULTNvGetic1YF69uuCX7t-CtU-yicrW0z6M5p8Y3zxk/edit?usp=sharing}{\texttt{ https\+://docs.\+google.\+com/spreadsheets/d/1\+U\+L\+T\+Nv\+Getic1\+Y\+F69uu\+C\+X7t-\/\+Ct\+U-\/yicr\+W0z6\+M5p8\+Y3zxk/edit?usp=sharing}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md5}{}\doxysubsection{Sprint Planning}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md5}
\mbox{[}!\mbox{[}Doc Link\mbox{]}(\href{https://img.shields.io/badge/Doc-link-blue}{\texttt{ https\+://img.\+shields.\+io/badge/\+Doc-\/link-\/blue}})\mbox{]}(\href{https://docs.google.com/document/d/1PARTqCdQkq0k0sgHWpRNl_M1ng2w7DdYFu71zwEIHzk/edit?usp=sharing}{\texttt{ https\+://docs.\+google.\+com/document/d/1\+P\+A\+R\+Tq\+Cd\+Qkq0k0sg\+H\+Wp\+R\+Nl\+\_\+\+M1ng2w7\+Dd\+Y\+Fu71zw\+E\+I\+Hzk/edit?usp=sharing}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md6}{}\doxysubsection{Phase 3 Progress}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md6}

\begin{DoxyItemize}
\item Generating a new world file, as localization is problematic in U\+MD world
\item Generated map for the above world using Gmapping and used the same for localization
\item Created new U\+ML diagram to reflect the change in code structure
\item Created Stub Classes and Test cases stubs for the new U\+ML
\item Created header and source files according to the stubs which passed the tests
\item Created a command line interface for controlling the fleet
\item Created a Graphical User Interface to communicate and control the robots
\item Created and released the package for the fleet system
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md7}{}\doxysubsection{Old World Files}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md7}
Gazebo\+: Spawning Fleet of Huskies in temporary Dock Station !\mbox{[}image\mbox{]}(\href{https://user-images.githubusercontent.com/24978535/144908953-9a8ab76a-c516-43da-9176-961469c7d72a.png}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24978535/144908953-\/9a8ab76a-\/c516-\/43da-\/9176-\/961469c7d72a.\+png}})

Rviz\+: Spawning Fleet of Huskies in temporary Dock Station !\mbox{[}image\mbox{]}(\href{https://user-images.githubusercontent.com/24978535/144908977-e60ed050-e89e-47d9-bfc4-a8884cad6ed5.png}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24978535/144908977-\/e60ed050-\/e89e-\/47d9-\/bfc4-\/a8884cad6ed5.\+png}})

U\+MD Campus Map Mckeldin Library !\mbox{[}image\mbox{]}(\href{https://user-images.githubusercontent.com/24978535/144909022-c8d16ee7-5cba-4e44-b92f-40f51a340c25.png}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24978535/144909022-\/c8d16ee7-\/5cba-\/4e44-\/b92f-\/40f51a340c25.\+png}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md8}{}\doxysubsection{New World File}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md8}
!\mbox{[}Whats\+App Image 2021-\/12-\/13 at 1 38 50 PM\mbox{]}(\href{https://user-images.githubusercontent.com/24701030/145869779-927f3504-0829-4aa2-a879-3d29cdf2373f.jpeg}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24701030/145869779-\/927f3504-\/0829-\/4aa2-\/a879-\/3d29cdf2373f.\+jpeg}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md9}{}\doxysubsection{Generated M\+A\+P for Localization}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md9}
!\mbox{[}Whats\+App Image 2021-\/12-\/13 at 1 38 50 PM (1)\mbox{]}(\href{https://user-images.githubusercontent.com/24701030/145869826-e1cd3ff5-e092-478b-8c75-7b2f60e4a9a5.jpeg}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24701030/145869826-\/e1cd3ff5-\/e092-\/478b-\/8c75-\/7b2f60e4a9a5.\+jpeg}}) !\mbox{[}Whats\+App Image 2021-\/12-\/13 at 1 38 50 PM (2)\mbox{]}(\href{https://user-images.githubusercontent.com/24701030/145869830-365af42b-4755-4056-8bdf-7190cc029418.jpeg}{\texttt{ https\+://user-\/images.\+githubusercontent.\+com/24701030/145869830-\/365af42b-\/4755-\/4056-\/8bdf-\/7190cc029418.\+jpeg}})\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md10}{}\doxysection{Assumptions}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md10}

\begin{DoxyItemize}
\item The streets do not have any traffic or traffic signals, hence the robot can navigate freely on the pedestrian paths, except for a few obstacles along the way.
\item The obstacles present on the pedestrian paths are of dimensions such that they do not block the complete pathway and will allow the robot to maneuver around it.
\item The paths are even and do not contain extreme slopes.
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md11}{}\doxysection{Project tested on}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md11}

\begin{DoxyItemize}
\item Ubuntu 20.\+04 using Noetic
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md12}{}\doxysection{Technologies}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md12}
$\ast$\+Programing language$\ast$\+: C++

$\ast$\+Build system$\ast$\+: cmake

$\ast$\+Testing Library$\ast$\+: Google Test

$\ast$\+Continuous Integration$\ast$\+: Git\+Hub Actions CI, Coverall

$\ast$\+Other$\ast$\+: R\+OS, Gazebo, R\+Viz, Clearpath Husky\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md13}{}\doxysection{Algorithms}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md13}

\begin{DoxyItemize}
\item husky\+\_\+navigation package, which uses gmapping, move\+\_\+base and frontier\+\_\+exploration \mbox{[}B\+S\+D-\/3-\/\+Clause License\mbox{]}.
\item C\+L\+I11 package for parsing command line input \mbox{[}B\+S\+D-\/3-\/\+Clause License\mbox{]}.
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md14}{}\doxysection{Risk and Mitigations}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md14}

\begin{DoxyItemize}
\item $\ast$$\ast$\+Risk 1$\ast$$\ast$\+: Error in Path planning Algorithm due to unknown constraints which might lead to delay in delivery time or failed delivery. Mitigation\+: This can be mitigated by improving the path planning algorithm by feeding the planning data to supervised learning ML algorithms and training the path planner to predict obstacles/possible unknown constraints.
\item $\ast$$\ast$\+Risk 2$\ast$$\ast$\+: Unexpected shutdown of R\+OS Master might lead to the shutdown of all the available agents/\+Robots. Mitigation\+: This risk can be mitigated by migrating the whole project to R\+O\+S2 or by integrating a R\+O\+S1 bridge with R\+O\+S2.
\item $\ast$$\ast$\+Risk 3$\ast$$\ast$\+: One of the sensors required for path planning might malfunction leading to erratic behavior. Mitigation\+: If such a condition occurs, the robot will be made to override the autonomous navigation signals and a human operator will manually control the robot.
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md15}{}\doxysubsection{Setbacks}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md15}

\begin{DoxyItemize}
\item Due to narrow pathways, the robots are unable to find paths as the cost map generated have high padding. This can be mitigated by using smaller robots or by generating different paths.
\end{DoxyItemize}\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md16}{}\doxysection{Running the code}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md16}
R\+OS Noetic is required to run the code, it\textquotesingle{}s installation can be found at \mbox{[}R\+OS Noetic installation\mbox{]}(\href{http://wiki.ros.org/noetic/Installation/Ubuntu}{\texttt{ http\+://wiki.\+ros.\+org/noetic/\+Installation/\+Ubuntu}})

As kivy is used for the G\+UI, it needs to be installed as follow


\begin{DoxyCode}{0}
\DoxyCodeLine{pip install https://github.com/kivymd/KivyMD/archive/master.zip}
\end{DoxyCode}


To run the code, first open a terminal and download the repository


\begin{DoxyCode}{0}
\DoxyCodeLine{git clone https://github.com/sumedhreddy90/MusketeersDeliveryFramework.git}
\end{DoxyCode}


Then, add the downloaded repository into your R\+OS workspace\textquotesingle{}s src folder (eg. catkin\+\_\+ws/src)

After adding the repository, change the directory of the repository to the workspace repository


\begin{DoxyCode}{0}
\DoxyCodeLine{cd \string~/catkin\_ws}
\end{DoxyCode}


To build the changes use 
\begin{DoxyCode}{0}
\DoxyCodeLine{catkin\_make}
\end{DoxyCode}


To source the build files use 
\begin{DoxyCode}{0}
\DoxyCodeLine{source devel/setup.bash}
\end{DoxyCode}


Launch files are provided that will spawn multiple robots in a gazebo environment and will simultaneously open rviz. To use the launch file, run the following command in the same terminal 
\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch musky\_nav multi\_husky\_delivery.launch }
\end{DoxyCode}


Wait for all the windows to open fully, which can be verified by checking the \`{}\+R\+O\+S\+\_\+\+I\+N\+F\+O\`{} message in the terminal where the above launch file was launched. It should display \`{}\+Recovery behavior will clear layer \textquotesingle{}obstacles\textquotesingle{}\`{}

After getting the above message, open a new terminal and navigate to the R\+OS workspace, using 
\begin{DoxyCode}{0}
\DoxyCodeLine{cd \string~/catkin\_ws}
\end{DoxyCode}


and source the build files 
\begin{DoxyCode}{0}
\DoxyCodeLine{source devel/setup.bash}
\end{DoxyCode}


To run the R\+OS node that controls the muskies, run the following code 
\begin{DoxyCode}{0}
\DoxyCodeLine{rosrun musky\_nav musk\_init \_\_name:=node1 1}
\end{DoxyCode}


Where \`{}\+\_\+\+\_\+name\+:=node1\`{} is used to create the instance of the node with a specified name, and \`{}1\`{} specifies the robot ID. The general command line code would be 
\begin{DoxyCode}{0}
\DoxyCodeLine{rosrun musky\_nav musk\_init \_\_name:=<node name> <Robot ID>}
\end{DoxyCode}


After the above command, the terminal will display all the options available for navigation 
\begin{DoxyCode}{0}
\DoxyCodeLine{Where do you want the robot to go?}
\DoxyCodeLine{}
\DoxyCodeLine{1 = Musketeers\_Base-\/Station : 1 }
\DoxyCodeLine{2 = Musketeers\_Base-\/Station : 2}
\DoxyCodeLine{3 = Musketeers\_Base-\/Station : 3}
\DoxyCodeLine{4 = Musketeers\_Base-\/Station : 4}
\DoxyCodeLine{5 = Chipotle}
\DoxyCodeLine{6 = Sub-\/way}
\DoxyCodeLine{7 = Taco-\/bell}
\DoxyCodeLine{8 = Panda Express}
\DoxyCodeLine{9 = Iribe}
\DoxyCodeLine{10 = Mckeldin Library}
\DoxyCodeLine{11 = J.M Patterson Hall}
\DoxyCodeLine{12 = Domain}
\end{DoxyCode}


Select one of the above mentioned options and the robot will plan the trajectory and will move accordingly

The bases are configured to cater to only the closes restaurants, hence, selection of the pickup location can be done as follows



The robots can also be controlled via a G\+UI as follows


\begin{DoxyCode}{0}
\DoxyCodeLine{rosrun musky\_nav musketeers\_gui.py}
\end{DoxyCode}
\hypertarget{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md17}{}\doxysubsubsection{G\+UI}\label{md__home_starfleeet-robotics__desktop__e_n_p_m808x_src__musketeers_delivery_framework__r_e_a_d_m_e_autotoc_md17}
 