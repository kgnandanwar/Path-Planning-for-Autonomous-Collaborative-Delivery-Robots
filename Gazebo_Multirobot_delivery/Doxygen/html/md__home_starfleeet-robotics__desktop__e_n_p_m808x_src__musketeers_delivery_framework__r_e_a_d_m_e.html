<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Musketeers ACME Robotics: Musketeers: Autonomous pickup and delivery fleet</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Musketeers ACME Robotics
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">The rapid rise of e-commerce services in the last decade, and its forecast for the future, have proved that the need for delivery services will be increasing, which needs to be addressed by improving the delivery infrastructure. Developments in technology have now made it possible to provide an autonomous solution, which can revolutionize the industry by creating an autonomous delivery network that can accomplish this task without the need for human intervention. Inthisproject,weproposeafleetofautonomousdeliveryrobots,calledMusky,thatcanprovidetransportationservicesforvariouskindsofsmalltomedium-sizedgoods(&lt;10lbs)forshort-rangehauling(&lt;5Miles)usingMultiFleetGPSWaypointNavigation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Musketeers: Autonomous pickup and delivery fleet </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://opensource.org/licenses/Apache-2.0"><object type="image/svg+xml" data="https://img.shields.io/badge/License-Apache_2.0-blue.svg" style="pointer-events: none;">License</object></a></p>
<p><object type="image/svg+xml" data="https://github.com/sumedhreddy90/MusketeersDeliveryFramework/actions/workflows/muskyCI.yml/badge.svg" style="pointer-events: none;">example workflow</object></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>The rapid rise of e-commerce services in the last decade, and its forecast for the future, have proved that the need for delivery services will be increasing, which needs to be addressed by improving the delivery infrastructure. Developments in technology have now made it possible to provide an autonomous solution, which can revolutionize the industry by creating an autonomous delivery network that can accomplish this task without the need for human intervention. \ In this project, we propose a fleet of autonomous delivery robots, called Musky, that can provide transportation services for various kinds of small to medium-sized goods(&lt;10 lbs) for short-range hauling(&lt;5 Miles) using Multi Fleet GPS Waypoint Navigation.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Repository</h2>
<p>This repository contains a multi-robot autonomous delivery framework, that works with husky robots from ClearPath robotics, in a simulation environment. The robots called "Musky" can be controlled via command line inputs, where they can be made to traverse to a preset location to pick up an order from a restaurant and will deliver it to a preset delivery location.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
UML</h2>
<p>[Quad Chart](<a href="https://drive.google.com/file/d/112d7ZOfGakJW6sQtDZE99uixeMIY7aPG/view?usp=sharing">https://drive.google.com/file/d/112d7ZOfGakJW6sQtDZE99uixeMIY7aPG/view?usp=sharing</a>) \ [Project Proposal](<a href="https://drive.google.com/file/d/1M1FodIeb_yLv4JwdbofX3ztwyTm6bGPM/view?usp=sharing">https://drive.google.com/file/d/1M1FodIeb_yLv4JwdbofX3ztwyTm6bGPM/view?usp=sharing</a>) \ [Activity Diagram](<a href="https://drive.google.com/file/d/1Tu6yAAuHe9edw5sUqZ6b6rdyhWe9690b/view?usp=sharing">https://drive.google.com/file/d/1Tu6yAAuHe9edw5sUqZ6b6rdyhWe9690b/view?usp=sharing</a>) \ [Class Diagram](<a href="https://drive.google.com/file/d/1F0wCk2moPsRFCpEKdf5eaZrsnagD0Mt8/view?usp=sharing">https://drive.google.com/file/d/1F0wCk2moPsRFCpEKdf5eaZrsnagD0Mt8/view?usp=sharing</a>)</p>
<h2><a class="anchor" id="autotoc_md4"></a>
AIP Document</h2>
<p>[![Doc Link](<a href="https://img.shields.io/badge/Doc-link-blue">https://img.shields.io/badge/Doc-link-blue</a>)](<a href="https://docs.google.com/spreadsheets/d/1ULTNvGetic1YF69uuCX7t-CtU-yicrW0z6M5p8Y3zxk/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1ULTNvGetic1YF69uuCX7t-CtU-yicrW0z6M5p8Y3zxk/edit?usp=sharing</a>)</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Sprint Planning</h2>
<p>[![Doc Link](<a href="https://img.shields.io/badge/Doc-link-blue">https://img.shields.io/badge/Doc-link-blue</a>)](<a href="https://docs.google.com/document/d/1PARTqCdQkq0k0sgHWpRNl_M1ng2w7DdYFu71zwEIHzk/edit?usp=sharing">https://docs.google.com/document/d/1PARTqCdQkq0k0sgHWpRNl_M1ng2w7DdYFu71zwEIHzk/edit?usp=sharing</a>)</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Phase 3 Progress</h2>
<ul>
<li>Generating a new world file, as localization is problematic in UMD world</li>
<li>Generated map for the above world using Gmapping and used the same for localization</li>
<li>Created new UML diagram to reflect the change in code structure</li>
<li>Created Stub Classes and Test cases stubs for the new UML</li>
<li>Created header and source files according to the stubs which passed the tests</li>
<li>Created a command line interface for controlling the fleet</li>
<li>Created a Graphical User Interface to communicate and control the robots</li>
<li>Created and released the package for the fleet system</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Old World Files</h2>
<p>Gazebo: Spawning Fleet of Huskies in temporary Dock Station ![image](<a href="https://user-images.githubusercontent.com/24978535/144908953-9a8ab76a-c516-43da-9176-961469c7d72a.png">https://user-images.githubusercontent.com/24978535/144908953-9a8ab76a-c516-43da-9176-961469c7d72a.png</a>)</p>
<p>Rviz: Spawning Fleet of Huskies in temporary Dock Station ![image](<a href="https://user-images.githubusercontent.com/24978535/144908977-e60ed050-e89e-47d9-bfc4-a8884cad6ed5.png">https://user-images.githubusercontent.com/24978535/144908977-e60ed050-e89e-47d9-bfc4-a8884cad6ed5.png</a>)</p>
<p>UMD Campus Map Mckeldin Library ![image](<a href="https://user-images.githubusercontent.com/24978535/144909022-c8d16ee7-5cba-4e44-b92f-40f51a340c25.png">https://user-images.githubusercontent.com/24978535/144909022-c8d16ee7-5cba-4e44-b92f-40f51a340c25.png</a>)</p>
<h2><a class="anchor" id="autotoc_md8"></a>
New World File</h2>
<p>![WhatsApp Image 2021-12-13 at 1 38 50 PM](<a href="https://user-images.githubusercontent.com/24701030/145869779-927f3504-0829-4aa2-a879-3d29cdf2373f.jpeg">https://user-images.githubusercontent.com/24701030/145869779-927f3504-0829-4aa2-a879-3d29cdf2373f.jpeg</a>)</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Generated MAP for Localization</h2>
<p>![WhatsApp Image 2021-12-13 at 1 38 50 PM (1)](<a href="https://user-images.githubusercontent.com/24701030/145869826-e1cd3ff5-e092-478b-8c75-7b2f60e4a9a5.jpeg">https://user-images.githubusercontent.com/24701030/145869826-e1cd3ff5-e092-478b-8c75-7b2f60e4a9a5.jpeg</a>) ![WhatsApp Image 2021-12-13 at 1 38 50 PM (2)](<a href="https://user-images.githubusercontent.com/24701030/145869830-365af42b-4755-4056-8bdf-7190cc029418.jpeg">https://user-images.githubusercontent.com/24701030/145869830-365af42b-4755-4056-8bdf-7190cc029418.jpeg</a>)</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Assumptions</h1>
<ul>
<li>The streets do not have any traffic or traffic signals, hence the robot can navigate freely on the pedestrian paths, except for a few obstacles along the way.</li>
<li>The obstacles present on the pedestrian paths are of dimensions such that they do not block the complete pathway and will allow the robot to maneuver around it.</li>
<li>The paths are even and do not contain extreme slopes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Project tested on</h1>
<ul>
<li>Ubuntu 20.04 using Noetic</li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Technologies</h1>
<p>*Programing language*: C++</p>
<p>*Build system*: cmake</p>
<p>*Testing Library*: Google Test</p>
<p>*Continuous Integration*: GitHub Actions CI, Coverall</p>
<p>*Other*: ROS, Gazebo, RViz, Clearpath Husky</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Algorithms</h1>
<ul>
<li>husky_navigation package, which uses gmapping, move_base and frontier_exploration [BSD-3-Clause License].</li>
<li>CLI11 package for parsing command line input [BSD-3-Clause License].</li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
Risk and Mitigations</h1>
<ul>
<li>**Risk 1**: Error in Path planning Algorithm due to unknown constraints which might lead to delay in delivery time or failed delivery. Mitigation: This can be mitigated by improving the path planning algorithm by feeding the planning data to supervised learning ML algorithms and training the path planner to predict obstacles/possible unknown constraints.</li>
<li>**Risk 2**: Unexpected shutdown of ROS Master might lead to the shutdown of all the available agents/Robots. Mitigation: This risk can be mitigated by migrating the whole project to ROS2 or by integrating a ROS1 bridge with ROS2.</li>
<li>**Risk 3**: One of the sensors required for path planning might malfunction leading to erratic behavior. Mitigation: If such a condition occurs, the robot will be made to override the autonomous navigation signals and a human operator will manually control the robot.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Setbacks</h2>
<ul>
<li>Due to narrow pathways, the robots are unable to find paths as the cost map generated have high padding. This can be mitigated by using smaller robots or by generating different paths.</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
Running the code</h1>
<p>ROS Noetic is required to run the code, it's installation can be found at [ROS Noetic installation](<a href="http://wiki.ros.org/noetic/Installation/Ubuntu">http://wiki.ros.org/noetic/Installation/Ubuntu</a>)</p>
<p>As kivy is used for the GUI, it needs to be installed as follow</p>
<div class="fragment"><div class="line">pip install https://github.com/kivymd/KivyMD/archive/master.zip</div>
</div><!-- fragment --><p>To run the code, first open a terminal and download the repository</p>
<div class="fragment"><div class="line">git clone https://github.com/sumedhreddy90/MusketeersDeliveryFramework.git</div>
</div><!-- fragment --><p>Then, add the downloaded repository into your ROS workspace's src folder (eg. catkin_ws/src)</p>
<p>After adding the repository, change the directory of the repository to the workspace repository</p>
<div class="fragment"><div class="line">cd ~/catkin_ws</div>
</div><!-- fragment --><p>To build the changes use </p><div class="fragment"><div class="line">catkin_make</div>
</div><!-- fragment --><p>To source the build files use </p><div class="fragment"><div class="line">source devel/setup.bash</div>
</div><!-- fragment --><p>Launch files are provided that will spawn multiple robots in a gazebo environment and will simultaneously open rviz. To use the launch file, run the following command in the same terminal </p><div class="fragment"><div class="line">roslaunch musky_nav multi_husky_delivery.launch </div>
</div><!-- fragment --><p>Wait for all the windows to open fully, which can be verified by checking the `ROS_INFO` message in the terminal where the above launch file was launched. It should display `Recovery behavior will clear layer 'obstacles'`</p>
<p>After getting the above message, open a new terminal and navigate to the ROS workspace, using </p><div class="fragment"><div class="line">cd ~/catkin_ws</div>
</div><!-- fragment --><p>and source the build files </p><div class="fragment"><div class="line">source devel/setup.bash</div>
</div><!-- fragment --><p>To run the ROS node that controls the muskies, run the following code </p><div class="fragment"><div class="line">rosrun musky_nav musk_init __name:=node1 1</div>
</div><!-- fragment --><p>Where `__name:=node1` is used to create the instance of the node with a specified name, and `1` specifies the robot ID. The general command line code would be </p><div class="fragment"><div class="line">rosrun musky_nav musk_init __name:=&lt;node name&gt; &lt;Robot ID&gt;</div>
</div><!-- fragment --><p>After the above command, the terminal will display all the options available for navigation </p><div class="fragment"><div class="line">Where do you want the robot to go?</div>
<div class="line"> </div>
<div class="line">1 = Musketeers_Base-Station : 1 </div>
<div class="line">2 = Musketeers_Base-Station : 2</div>
<div class="line">3 = Musketeers_Base-Station : 3</div>
<div class="line">4 = Musketeers_Base-Station : 4</div>
<div class="line">5 = Chipotle</div>
<div class="line">6 = Sub-way</div>
<div class="line">7 = Taco-bell</div>
<div class="line">8 = Panda Express</div>
<div class="line">9 = Iribe</div>
<div class="line">10 = Mckeldin Library</div>
<div class="line">11 = J.M Patterson Hall</div>
<div class="line">12 = Domain</div>
</div><!-- fragment --><p>Select one of the above mentioned options and the robot will plan the trajectory and will move accordingly</p>
<p>The bases are configured to cater to only the closes restaurants, hence, selection of the pickup location can be done as follows</p>
<p><img src="https://user-images.githubusercontent.com/24701030/145853502-14e9387f-e29f-46b6-a16c-5e1e00173fd2.png" alt="" class="inline"/></p>
<p>The robots can also be controlled via a GUI as follows</p>
<div class="fragment"><div class="line">rosrun musky_nav musketeers_gui.py</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17"></a>
GUI</h3>
<p><img src="https://user-images.githubusercontent.com/24701030/145869304-9392391b-51a4-4114-93a0-f74b49ca2876.jpeg" alt="WhatsApp Image 2021-12-13 at 11 00 18 AM" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
